可以发现，知道 ![math](https://render.githubusercontent.com/render/math?math=f%28S%29) （即对 ![math](https://render.githubusercontent.com/render/math?math=S) 应用那个操作），可以快速得到 ![math](https://render.githubusercontent.com/render/math?math=f%28S%2Bc%29%2Cf%28c%2BS%29) 。

状压DP即可。

特别的，需要对 ![math](https://render.githubusercontent.com/render/math?math=-1) 的情况多加考虑。
